---------------------------------------------------------------
--  created:   2010.3.17
--  author:    liudong
--  内容：任务脚本文件
------------------------------------------------------------------
--  说明：A类日常任务：自由港生活  by xiaozhiyu
------------------------------------------------------------------
TaskList[9706] = --  日常-自由港生活-主任务
{
	levelweight =
    {
        {level=10,tp1=200,tp2=0,tp3=100,tp4=200,tp5=0,tp6=100,tp7=100,tp8=100,tp9=100,tp10=0,tp11=100,tp12=0,tp13=0,tp14=0,tp15=0,tp16=0,tp17=0,tp18=0,tp19=0,tp20=0,},
        {level=20,tp1=100,tp2=300,tp3=100,tp4=0,tp5=0,tp6=100,tp7=100,tp8=100,tp9=100,tp10=0,tp11=100,tp12=0,tp13=0,tp14=0,tp15=0,tp16=0,tp17=0,tp18=0,tp19=0,tp20=0,},
        {level=30,tp1=50,tp2=249,tp3=100,tp4=100,tp5=0,tp6=100,tp7=100,tp8=80,tp9=100,tp10=40,tp11=60,tp12=20,tp13=0,tp14=0,tp15=0,tp16=0,tp17=0,tp18=1,tp19=0,tp20=0,},
        {level=40,tp1=50,tp2=223,tp3=50,tp4=80,tp5=0,tp6=100,tp7=100,tp8=70,tp9=100,tp10=30,tp11=0,tp12=20,tp13=20,tp14=10,tp15=50,tp16=65,tp17=30,tp18=2,tp19=0,tp20=0,},
        {level=50,tp1=75,tp2=210,tp3=0,tp4=100,tp5=0,tp6=100,tp7=100,tp8=67,tp9=100,tp10=30,tp11=0,tp12=20,tp13=20,tp14=10,tp15=50,tp16=65,tp17=40,tp18=3,tp19=0,tp20=10,},
        {level=60,tp1=0,tp2=210,tp3=0,tp4=100,tp5=0,tp6=100,tp7=100,tp8=65,tp9=176,tp10=30,tp11=0,tp12=20,tp13=20,tp14=10,tp15=50,tp16=65,tp17=40,tp18=4,tp19=0,tp20=10,},
    },
	tplib =
    {
        {tp="tp1",order=1,id=9707,num=1,note="task",startlv=10,endlv=49,},
        {tp="tp1",order=2,id=9708,num=1,note="task",startlv=10,endlv=49,},
        {tp="tp1",order=3,id=9709,num=1,note="task",startlv=10,endlv=49,},
        {tp="tp1",order=4,id=9710,num=1,note="task",startlv=10,endlv=49,},
        {tp="tp1",order=5,id=9711,num=1,note="task",startlv=10,endlv=49,},
        {tp="tp1",order=6,id=9712,num=1,note="task",startlv=10,endlv=49,},
        {tp="tp1",order=7,id=9713,num=1,note="task",startlv=10,endlv=49,},
        {tp="tp1",order=8,id=9714,num=1,note="task",startlv=10,endlv=200,},
        {tp="tp1",order=9,id=9715,num=1,note="task",startlv=10,endlv=200,},
        {tp="tp1",order=10,id=9716,num=1,note="task",startlv=10,endlv=200,},
        {tp="tp1",order=11,id=9717,num=1,note="task",startlv=10,endlv=200,},
        {tp="tp1",order=12,id=9718,num=1,note="task",startlv=10,endlv=200,},
        {tp="tp1",order=13,id=9719,num=1,note="task",startlv=10,endlv=200,},
        {tp="tp1",order=14,id=9720,num=1,note="task",startlv=50,endlv=200,},
        {tp="tp1",order=15,id=9721,num=1,note="task",startlv=50,endlv=200,},
        {tp="tp1",order=16,id=9722,num=1,note="task",startlv=50,endlv=200,},
        {tp="tp1",order=17,id=9723,num=1,note="task",startlv=50,endlv=200,},
        {tp="tp1",order=18,id=9724,num=1,note="task",startlv=50,endlv=200,},
        {tp="tp1",order=19,id=9725,num=1,note="task",startlv=50,endlv=200,},
        {tp="tp1",order=20,id=9726,num=1,note="task",startlv=50,endlv=200,},
        {tp="tp2",order=30,id=5718,id2=27575,num=1,note="wish",startlv=20,endlv=120,},
        {tp="tp3",order=31,id=9727,num=1,note="site",startlv=10,endlv=120,},
        {tp="tp3",order=32,id=9728,num=1,note="site",startlv=10,endlv=120,},
        {tp="tp3",order=33,id=9729,num=1,note="site",startlv=10,endlv=120,},
        {tp="tp4",order=50,id=21,num=5,note="monster",startlv=10,endlv=19,},
        {tp="tp4",order=51,id=6623,num=5,note="monster",startlv=10,endlv=19,},
        {tp="tp4",order=52,id=22,num=5,note="monster",startlv=17,endlv=19,},
        {tp="tp4",order=53,id=24,num=5,note="monster",startlv=17,endlv=19,},
        {tp="tp4",order=54,id=16013,num=5,note="monster",startlv=17,endlv=19,},
        {tp="tp4",order=55,id=27216,num=3,note="monster",startlv=30,endlv=39,},
        {tp="tp4",order=56,id=5788,num=8,note="monster",startlv=40,endlv=49,},
        {tp="tp4",order=57,id=5783,num=8,note="monster",startlv=40,endlv=49,},
        {tp="tp4",order=58,id=27217,num=3,note="monster",startlv=50,endlv=59,},
        {tp="tp4",order=59,id=23,num=10,note="monster",startlv=60,endlv=69,},
        {tp="tp4",order=60,id=23,num=10,note="monster",startlv=60,endlv=69,},
        {tp="tp4",order=61,id=16033,num=10,note="monster",startlv=65,endlv=69,},
        {tp="tp4",order=62,id=16034,num=10,note="monster",startlv=65,endlv=69,},
        {tp="tp4",order=63,id=16035,num=10,note="monster",startlv=65,endlv=69,},
        {tp="tp4",order=64,id=16036,num=10,note="monster",startlv=65,endlv=69,},
        {tp="tp6",order=120,id=4534,num=1,note="item",startlv=1,endlv=21,},
        {tp="tp6",order=121,id=4535,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp6",order=122,id=4536,num=1,note="item",startlv=20,endlv=40,},
        {tp="tp6",order=123,id=4537,num=1,note="item",startlv=30,endlv=50,},
        {tp="tp6",order=124,id=4538,num=1,note="item",startlv=40,endlv=60,},
        {tp="tp6",order=125,id=4539,num=1,note="item",startlv=50,endlv=70,},
        {tp="tp6",order=126,id=4540,num=1,note="item",startlv=1,endlv=21,},
        {tp="tp6",order=127,id=4541,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp6",order=128,id=4542,num=1,note="item",startlv=20,endlv=40,},
        {tp="tp6",order=129,id=4543,num=1,note="item",startlv=30,endlv=50,},
        {tp="tp6",order=130,id=4544,num=1,note="item",startlv=40,endlv=60,},
        {tp="tp6",order=131,id=4545,num=1,note="item",startlv=50,endlv=70,},
        {tp="tp6",order=132,id=5829,num=1,note="item",startlv=1,endlv=31,},
        {tp="tp6",order=133,id=5830,num=1,note="item",startlv=30,endlv=60,},
        {tp="tp6",order=134,id=5831,num=1,note="item",startlv=50,endlv=80,},
        {tp="tp6",order=135,id=5832,num=1,note="item",startlv=1,endlv=31,},
        {tp="tp6",order=136,id=5833,num=1,note="item",startlv=30,endlv=60,},
        {tp="tp6",order=137,id=5834,num=1,note="item",startlv=50,endlv=80,},
        {tp="tp7",order=150,id=11687,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp7",order=151,id=12340,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp7",order=152,id=12341,num=1,note="item",startlv=20,endlv=40,},
        {tp="tp7",order=153,id=12342,num=1,note="item",startlv=30,endlv=50,},
        {tp="tp7",order=154,id=7043,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp7",order=155,id=7041,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp7",order=156,id=7044,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp7",order=157,id=7045,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp7",order=158,id=7042,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp7",order=159,id=17440,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp7",order=160,id=19034,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp7",order=161,id=19035,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp7",order=162,id=19036,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp7",order=163,id=19037,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp7",order=164,id=18919,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp7",order=165,id=12234,num=1,note="item",startlv=10,endlv=30,},
        {tp="tp8",order=170,id=17009,num=1,note="item",startlv=10,endlv=29,},
        {tp="tp8",order=171,id=17011,num=1,note="item",startlv=10,endlv=29,},
        {tp="tp8",order=172,id=19062,num=1,note="item",startlv=10,endlv=29,},
        {tp="tp8",order=173,id=17012,num=1,note="item",startlv=10,endlv=29,},
        {tp="tp8",order=174,id=17013,num=1,note="item",startlv=10,endlv=29,},
        {tp="tp8",order=175,id=19063,num=1,note="item",startlv=10,endlv=29,},
        {tp="tp8",order=176,id=17016,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp8",order=177,id=17017,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp8",order=178,id=17018,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp8",order=179,id=23286,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp8",order=180,id=17019,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp8",order=181,id=17020,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp8",order=182,id=17021,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp8",order=183,id=17023,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=184,id=17024,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=185,id=17025,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=186,id=17026,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=187,id=17027,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=188,id=17028,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=189,id=17030,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=190,id=17039,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=191,id=17033,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=192,id=17034,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=193,id=17035,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=194,id=23287,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=195,id=17029,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=196,id=17036,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=197,id=17037,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=198,id=17038,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=199,id=23867,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=200,id=21425,num=1,note="item",startlv=10,endlv=29,},
        {tp="tp8",order=201,id=21426,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp8",order=202,id=21427,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=203,id=21428,num=1,note="item",startlv=40,endlv=59,},
        {tp="tp8",order=204,id=21429,num=1,note="item",startlv=50,endlv=69,},
        {tp="tp8",order=205,id=21430,num=1,note="item",startlv=60,endlv=120,},
        {tp="tp8",order=206,id=16951,num=1,note="item",startlv=10,endlv=29,},
        {tp="tp8",order=207,id=16952,num=1,note="item",startlv=10,endlv=29,},
        {tp="tp8",order=208,id=16972,num=1,note="item",startlv=10,endlv=29,},
        {tp="tp8",order=209,id=16973,num=1,note="item",startlv=10,endlv=29,},
        {tp="tp8",order=210,id=16974,num=1,note="item",startlv=10,endlv=29,},
        {tp="tp8",order=211,id=21438,num=1,note="item",startlv=10,endlv=29,},
        {tp="tp8",order=212,id=16961,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp8",order=213,id=16962,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp8",order=214,id=16980,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp8",order=215,id=16980,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp8",order=216,id=16981,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp8",order=217,id=21439,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp8",order=218,id=16953,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=219,id=16954,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=220,id=16992,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=221,id=16993,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=222,id=16993,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=223,id=21099,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=224,id=21100,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=225,id=21440,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp8",order=226,id=16959,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=227,id=16960,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=228,id=16982,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=229,id=16983,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=230,id=16998,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=231,id=16999,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=232,id=16999,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp8",order=233,id=21441,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp9",order=400,id=9624,num=3,note="item",startlv=10,endlv=29,},
        {tp="tp9",order=401,id=9625,num=3,note="item",startlv=20,endlv=39,},
        {tp="tp9",order=402,id=9626,num=3,note="item",startlv=30,endlv=49,},
        {tp="tp9",order=403,id=9627,num=3,note="item",startlv=40,endlv=59,},
        {tp="tp9",order=404,id=9628,num=3,note="item",startlv=50,endlv=69,},
        {tp="tp9",order=405,id=9629,num=3,note="item",startlv=60,endlv=120,},
        {tp="tp10",order=450,id=27206,num=3,note="item",startlv=30,endlv=70,},
        {tp="tp11",order=500,id=20323,num=1,note="item",startlv=10,endlv=39,},
        {tp="tp11",order=501,id=20326,num=1,note="item",startlv=10,endlv=39,},
        {tp="tp11",order=502,id=20332,num=1,note="item",startlv=10,endlv=39,},
        {tp="tp11",order=503,id=20336,num=1,note="item",startlv=10,endlv=39,},
        {tp="tp12",order=505,id=7076,num=2,note="item",startlv=10,endlv=39,},
        {tp="tp12",order=506,id=7075,num=2,note="item",startlv=10,endlv=39,},
        {tp="tp12",order=507,id=7081,num=2,note="item",startlv=20,endlv=49,},
        {tp="tp12",order=508,id=9517,num=2,note="item",startlv=20,endlv=49,},
        {tp="tp12",order=509,id=11636,num=2,note="item",startlv=20,endlv=49,},
        {tp="tp12",order=510,id=7082,num=2,note="item",startlv=30,endlv=59,},
        {tp="tp12",order=511,id=9496,num=2,note="item",startlv=30,endlv=59,},
        {tp="tp12",order=512,id=7084,num=2,note="item",startlv=30,endlv=59,},
        {tp="tp12",order=513,id=7085,num=2,note="item",startlv=30,endlv=59,},
        {tp="tp12",order=514,id=16949,num=2,note="item",startlv=40,endlv=120,},
        {tp="tp12",order=515,id=9514,num=2,note="item",startlv=40,endlv=120,},
        {tp="tp12",order=516,id=7080,num=2,note="item",startlv=40,endlv=120,},
        {tp="tp12",order=517,id=9495,num=2,note="item",startlv=40,endlv=120,},
        {tp="tp12",order=518,id=9516,num=2,note="item",startlv=40,endlv=120,},
        {tp="tp12",order=519,id=7056,num=2,note="item",startlv=40,endlv=69,},
        {tp="tp12",order=520,id=7057,num=2,note="item",startlv=50,endlv=120,},
        {tp="tp12",order=521,id=21651,num=2,note="item",startlv=20,endlv=39,},
        {tp="tp12",order=522,id=7101,num=2,note="item",startlv=20,endlv=39,},
        {tp="tp12",order=523,id=7103,num=2,note="item",startlv=30,endlv=49,},
        {tp="tp12",order=524,id=7102,num=2,note="item",startlv=30,endlv=49,},
        {tp="tp12",order=525,id=18032,num=2,note="item",startlv=40,endlv=120,},
        {tp="tp12",order=526,id=7108,num=2,note="item",startlv=40,endlv=120,},
        {tp="tp13",order=530,id=21102,num=2,note="item",startlv=10,endlv=29,},
        {tp="tp13",order=531,id=21106,num=2,note="item",startlv=10,endlv=29,},
        {tp="tp13",order=532,id=9636,num=2,note="item",startlv=10,endlv=29,},
        {tp="tp13",order=533,id=9649,num=2,note="item",startlv=10,endlv=29,},
        {tp="tp13",order=534,id=9650,num=2,note="item",startlv=10,endlv=29,},
        {tp="tp13",order=535,id=9650,num=2,note="item",startlv=10,endlv=29,},
        {tp="tp13",order=536,id=21103,num=2,note="item",startlv=20,endlv=39,},
        {tp="tp13",order=537,id=21107,num=2,note="item",startlv=20,endlv=39,},
        {tp="tp13",order=538,id=9657,num=2,note="item",startlv=20,endlv=39,},
        {tp="tp13",order=539,id=9657,num=2,note="item",startlv=20,endlv=39,},
        {tp="tp13",order=540,id=9658,num=2,note="item",startlv=20,endlv=39,},
        {tp="tp13",order=541,id=9422,num=2,note="item",startlv=30,endlv=49,},
        {tp="tp13",order=542,id=9423,num=2,note="item",startlv=30,endlv=49,},
        {tp="tp13",order=543,id=9663,num=2,note="item",startlv=30,endlv=49,},
        {tp="tp13",order=544,id=9664,num=2,note="item",startlv=30,endlv=49,},
        {tp="tp13",order=545,id=9664,num=2,note="item",startlv=30,endlv=49,},
        {tp="tp13",order=546,id=21104,num=2,note="item",startlv=30,endlv=49,},
        {tp="tp13",order=547,id=21108,num=2,note="item",startlv=30,endlv=49,},
        {tp="tp13",order=548,id=9424,num=2,note="item",startlv=40,endlv=120,},
        {tp="tp13",order=549,id=9425,num=2,note="item",startlv=40,endlv=120,},
        {tp="tp13",order=550,id=21105,num=2,note="item",startlv=40,endlv=120,},
        {tp="tp13",order=551,id=21109,num=2,note="item",startlv=40,endlv=120,},
        {tp="tp13",order=552,id=9704,num=2,note="item",startlv=40,endlv=120,},
        {tp="tp13",order=553,id=9705,num=2,note="item",startlv=40,endlv=120,},
        {tp="tp13",order=554,id=9705,num=2,note="item",startlv=40,endlv=120,},
        {tp="tp14",order=570,id=21419,num=1,note="item",startlv=10,endlv=29,},
        {tp="tp14",order=571,id=21420,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp14",order=572,id=21421,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp14",order=573,id=21422,num=1,note="item",startlv=40,endlv=59,},
        {tp="tp14",order=574,id=21423,num=1,note="item",startlv=50,endlv=69,},
        {tp="tp14",order=575,id=21424,num=1,note="item",startlv=60,endlv=120,},
        {tp="tp14",order=576,id=21432,num=1,note="item",startlv=10,endlv=29,},
        {tp="tp14",order=577,id=21433,num=1,note="item",startlv=20,endlv=39,},
        {tp="tp14",order=578,id=21434,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp14",order=579,id=21435,num=1,note="item",startlv=40,endlv=59,},
        {tp="tp14",order=580,id=21436,num=1,note="item",startlv=50,endlv=69,},
        {tp="tp14",order=581,id=21437,num=1,note="item",startlv=60,endlv=120,},
        {tp="tp14",order=582,id=11672,num=1,note="item",startlv=30,endlv=49,},
        {tp="tp14",order=583,id=11673,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp15",order=600,id=20321,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp15",order=601,id=20322,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp15",order=602,id=20325,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp15",order=603,id=20328,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp15",order=604,id=20329,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp15",order=605,id=20330,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp15",order=606,id=20344,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp15",order=607,id=20345,num=1,note="item",startlv=40,endlv=120,},
        {tp="tp17",order=660,id=16955,num=1,note="item",startlv=40,endlv=59,},
        {tp="tp17",order=661,id=16956,num=1,note="item",startlv=40,endlv=59,},
        {tp="tp17",order=662,id=17010,num=1,note="item",startlv=40,endlv=59,},
        {tp="tp17",order=663,id=17014,num=1,note="item",startlv=40,endlv=59,},
    },


	--以下是程序使用的表
	Property =
  	{
  		bCanRedo = true,
  		bCanRedoAfterFailure = true,
  		bCanGiveUp = true,
  		bShowPrompt = true,
  		bCanSeekOut = true,
  		bRecordFinishCount = true,
  		iMaxFinishCount = 900,		--每天最多可完成的次数：30
  		iClearFinishCountType = TaskClearFinishCountType.Daily,--每天清空
  		iType  = TaskType.RiChangXunHuan,
  		iTopic = TaskTopic.YiBan,
  	},
	AwardPreview =
	{
--[[		Exp = function(TASKINTERFACE_POINTER)
			local base_awards = { xp = 108, bindmoney = 10 }
			local multi = { 0.4,	0.54,	0.67,	0.8,	0.94,	1.07,	1.2,	1.34,	1.47,	1.6,}
			local completetimes = TaskCApi.GetTaskCompleteTimesFromFinishTimeTaskList(TASKINTERFACE_POINTER,9706)	--任务已经完成次数
			local iExperience = TaskExpAdjust[player.level]		--根据玩家等级，从全局表里找到对应的等级经验系数
			local iBindMoneyNum = TaskMoneyAdjust[player.level]		--根据玩家等级，从全局表里找到对应的金钱经验系数
			local awardmulti
			if completetimes == 0 then awardmulti = multi[1]
			elseif completetimes <= 9 then awardmulti = multi[completetimes+1]	--前10次是5倍
			elseif completetimes <= 19 then awardmulti = multi[completetimes-9] /5
			elseif completetimes <= 29 then awardmulti = multi[completetimes-19] /5
			end

			iExperience = math.floor(iExperience * base_awards.xp * awardmulti)
			return iExperience	--返回0时为？？？，其他为显示的值
		end	,
		BindMoney = function(TASKINTERFACE_POINTER)
			local base_awards = { xp = 108, bindmoney = 10 }
			local multi = { 0.4,	0.54,	0.67,	0.8,	0.94,	1.07,	1.2,	1.34,	1.47,	1.6,}
			local completetimes = TaskCApi.GetTaskCompleteTimesFromFinishTimeTaskList(TASKINTERFACE_POINTER,9706)	--任务完成次数
			local iExperience = TaskExpAdjust[player.level]		--根据玩家等级，从全局表里找到对应的等级经验系数
			local iBindMoneyNum = TaskMoneyAdjust[player.level]		--根据玩家等级，从全局表里找到对应的金钱经验系数
			local awardmulti
			if completetimes == 0 then awardmulti = multi[1]
			elseif completetimes <= 9 then awardmulti = multi[completetimes+1]	--前10次是5倍
			elseif completetimes <= 19 then awardmulti = multi[completetimes-9] /5
			elseif completetimes <= 29 then awardmulti = multi[completetimes-19] /5
			end

			iBindMoneyNum = math.floor(iBindMoneyNum * base_awards.xp * awardmulti)
			return iBindMoneyNum--返回0时为？？？，其他为显示的值
		end	,
		--]]
	},

   	--任务发放检查，客户端在NPC显示、玩家确认接受时调用，服务器在响应发放时调用
   	OnCheckDeliver = function(TASKINTERFACE_POINTER)
		local player =	--取得玩家的一些数据
		{
			level = TaskCApi.GetPlayerLevel(TASKINTERFACE_POINTER),
		}
	   	if player.level < 10 then  return TASK_PREREQU_FAIL_LUA_TASK end		--需要等级至少为10级

		--任务栏是否已满
-- 		local iRet = TaskCApi.CheckDeliverNewTask(TASKINTERFACE_POINTER, 5718)	--能否在发放本任务的同时发放另一个任务，预留空间
-- 		if iRet ~= 0 then
-- 			return TASK_PREREQU_FAIL_LUA_TASK
-- 		end

		--角色的当前任务列表里没有本任务的附属任务 wish类型
--		for i,v in ipairs(TaskList[9706].tplib) do
	--		if v.note == "wish" and TaskCApi.HasTaskInActiveTaskList(TASKINTERFACE_POINTER,v.id) then
		--		return TASK_PREREQU_FAIL_LUA_TASK
			--end
		--end
		--角色的当前任务列表里没有本任务的互斥任务：9823
		if TaskCApi.HasTaskInActiveTaskList(TASKINTERFACE_POINTER,9823) then return TASK_PREREQU_FAIL_LUA_TASK end
   		return 0
   	end
   	,

   	--玩家接收该任务时调用
   	OnDeliver = function(TASKINTERFACE_POINTER)
		local TPMAX = 20	--levelweight表里tp的最大值，现在是20
		local player =	--取得玩家的一些数据
		{
			level = TaskCApi.GetPlayerLevel(TASKINTERFACE_POINTER),
			race = TaskCApi.GetPlayerRace(TASKINTERFACE_POINTER),
			prof = TaskCApi.GetPlayerOccupation(TASKINTERFACE_POINTER),
			buff = 0,
			repu31 = TaskCApi.GetRegionReputation(TASKINTERFACE_POINTER,31),
		}

		local tpfinal = {}		--最终的任务形式从这个表里进行随机
		local levelnow,tpnow
		local temp_level = 1
		local peak = 0
		while TaskList[9706].levelweight[temp_level+1] and player.level >= TaskList[9706].levelweight[temp_level+1].level do
			temp_level = temp_level+1
		end
		levelnow = temp_level	--确认从levelweight的哪一行取数

		while not tpfinal[1] do
			for j=1,TPMAX do
				peak = peak + TaskList[9706].levelweight[levelnow]["tp"..j] or 0
				math.randomseed(os.time())
				local iRam = math.random(1,1000)
				if iRam and iRam <= peak then
					tpnow = j
					break
				end
				if j==TPMAX then tpnow = tpnow or 1 end	--容错：如果没有随到任何类型，那么就指定是tp1
			end
-- 		print(levelnow,"tpnow="..tpnow)
			for i,v in ipairs(TaskList[9706].tplib) do
				if v.id and v.tp == "tp"..tpnow then
					if v.startlv <= player.level and player.level <= v.endlv then
						if not v.race or player.race == v.race then
							if not v.prof or player.prof == v.prof then
								if not v.buff or player.buff == v.buff then
									table.insert(tpfinal,v)
								end
							end
						end
					end
				end
			end
		end

		math.randomseed(os.time())
		local iRam2 = math.random(1,#tpfinal)
		local ordernow = tonumber(tpfinal[iRam2].order)		--最终得到的order

		-----测试gm-----
		local item2053 = TaskCApi.GetItemNumInPacket(TASKINTERFACE_POINTER,2053, true)
		for i,v in ipairs (TaskList[9706].tplib) do
			if item2053 == v.order then
				ordernow = item2053
				break
			end
		end
		-----测试over----

		local x,y = math.floor(ordernow / 10), ordernow % 10				--把order拆成两个整数: order = 10*x + y
		TaskCApi.SetDataToActiveTaskList(TASKINTERFACE_POINTER,9706, 1,x)	--x，y分别存入任务变量1和2
		TaskCApi.SetDataToActiveTaskList(TASKINTERFACE_POINTER,9706, 2,y)

		--如果note="task"，那么把#31声望清零，再把#31设成order的值。同时清空任务完成次数，清除任务完成结果。
--		if tpfinal[iRam2].note == "task" then
		local taskid = {9707,	9708,	9709,	9710,	9711,	9712,	9713,	9714,	9715,	9716,	9717,	9718,	9719,	9720,	9721,	9722,	9723,	9724,	9725,	9726,9791,5718,9727,9728,9729,}
			TaskCApi.DeliverRegionReputation(TASKINTERFACE_POINTER,31, ordernow-player.repu31)
		for i,v in ipairs (taskid) do
			TaskCApi.ClearTaskCompleteTimesInFinishTimeTaskList(TASKINTERFACE_POINTER,v)
			TaskCApi.ClearFinishRecords(TASKINTERFACE_POINTER,v)
		end
--		end
		return 0
	end
	,

   	--服务器杀怪、取得物品等条件下调用，客户端任务界面显示时调用
   	OnMethod = function(TASKINTERFACE_POINTER)
   		local Method = {}
		local final
		local x = TaskCApi.GetDataFromActiveTaskList(TASKINTERFACE_POINTER,9706, 1)
		local y = TaskCApi.GetDataFromActiveTaskList(TASKINTERFACE_POINTER,9706, 2)
		local ordernow = 10 * x + y
		--根据ordernow的值遍历tplib，找到索引号，存入变量final
		for i,v in ipairs(TaskList[9706].tplib) do
			if v.order == ordernow then
				final = i
				break
			end
		end
		--设定任务完成方式
		if TaskList[9706].tplib[final].note == "task" then
			Method.iWaitTime = 0
		elseif TaskList[9706].tplib[final].note == "site" then
			Method.iWaitTime = 0
		elseif TaskList[9706].tplib[final].note == "monster" then
			Method.KillMonster =
			{
				Mons1 =
				{
					ID = TaskList[9706].tplib[final].id,
					Num = TaskList[9706].tplib[final].num,
				},
			}
		elseif TaskList[9706].tplib[final].note == "mos_item" then
			Method.KillMonster =
			{
				Mons1 =
				{
					ID = TaskList[9706].tplib[final].id,
					Num = 0,
					DropItemID = TaskList[9706].tplib[final].id2,
					DropItemProbability = 0.5	--掉落物品概率统一为0.5
				},
			}
			Method.CollectItem =
			{
				Item1=
				{
					ID=TaskList[9706].tplib[final].id2,
					Num=TaskList[9706].tplib[final].num,
					Common=false
				},
			}
		elseif TaskList[9706].tplib[final].note == "item" then
			Method.CollectItem =
			{
				Item1=
				{
					ID=TaskList[9706].tplib[final].id,
					Num=TaskList[9706].tplib[final].num,
					Common=true
				},
			}
		elseif TaskList[9706].tplib[final].note == "wish" then	--愿望
			Method.CollectItem =
			{
				Item1=
				{
					ID=TaskList[9706].tplib[final].id2,
					Num=TaskList[9706].tplib[final].num,
					Common=true
				},
			}
		else
			Method.iWaitTime = 0
		end
   		return Method
   	end
   	,

   	--检查完成任务,在杀怪、拾取物品、每隔一定时间、发奖前调用
   	OnCheckFinish = function(TASKINTERFACE_POINTER)
   		local iRet = TASK_NO_FINISH
		local final
		local x = TaskCApi.GetDataFromActiveTaskList(TASKINTERFACE_POINTER,9706, 1)
		local y = TaskCApi.GetDataFromActiveTaskList(TASKINTERFACE_POINTER,9706, 2)
		local ordernow = 10 * x + y
		--根据ordernow的值遍历tplib，找到索引号，存入变量final
		for i,v in ipairs(TaskList[9706].tplib) do
			if v.order == ordernow then
				final = i
				break
			end
		end
		--设定任务完成方式：成功完成
		if TaskList[9706].tplib[final].note == "task" then
			local iCount = TaskCApi.GetTaskCompleteTimesFromFinishTimeTaskList(TASKINTERFACE_POINTER,TaskList[9706].tplib[final].id)
			if iCount >= 1 then
				iRet = TASK_SUCC_FINISH
			end
		elseif TaskList[9706].tplib[final].note == "site" then
			local iCount = TaskCApi.GetTaskCompleteTimesFromFinishTimeTaskList(TASKINTERFACE_POINTER,TaskList[9706].tplib[final].id)
			if iCount >= 1 then
				iRet = TASK_SUCC_FINISH
			end
		elseif TaskList[9706].tplib[final].note == "monster" then
			local iCount = TaskCApi.GetMonstersKilled(TASKINTERFACE_POINTER,9706, "Mons1")
			if iCount >= TaskList[9706].tplib[final].num then
				iRet = TASK_SUCC_FINISH
			end
		elseif TaskList[9706].tplib[final].note == "mos_item" then
			local iCount = TaskCApi.GetItemNumInPacket(TASKINTERFACE_POINTER,TaskList[9706].tplib[final].id2, false)	--id是怪物id，id2是任务物品id
			if iCount >= TaskList[9706].tplib[final].num then
				iRet = TASK_SUCC_FINISH
			end
		elseif TaskList[9706].tplib[final].note == "item" then
			local iCount = TaskCApi.GetItemNumInPacket(TASKINTERFACE_POINTER,TaskList[9706].tplib[final].id, true)
			if iCount >= TaskList[9706].tplib[final].num then
				iRet = TASK_SUCC_FINISH
			end
		elseif TaskList[9706].tplib[final].note == "wish" then
			local iCount = TaskCApi.GetItemNumInPacket(TASKINTERFACE_POINTER,TaskList[9706].tplib[final].id2, true)
			if iCount >= TaskList[9706].tplib[final].num then
				iRet = TASK_SUCC_FINISH
			end
		end
		--设定任务完成方式：失败完成(当附属任务失败完成时，主任务也失败）

--[[	TaskCApi.HasTaskInFinsihTaskList(TASKINTERFACE_POINTER,iTaskID,bSuccess) --玩家的完成任务列表FinishTaskList中是否有任务
					iTaskID		int		任务ID
					bSuccess	bool	为true表示任务iTaskID是成功完成，为false表示任务iTaskID是失败完成。
--]]
		if TaskCApi.HasTaskInFinsihTaskList(TASKINTERFACE_POINTER,TaskList[9706].tplib[final].id,false) then
			iRet = TASK_FAIL_FINISH
		end
   		return iRet
   	end
   	,

   	OnCheckAward = function(TASKINTERFACE_POINTER, bSuccess)
   		if bSuccess then
   	    	if TaskCApi.GetCommonPacketEmptySolts(TASKINTERFACE_POINTER)  < 1 then --普通包裹栏需要1格
   			   return TASK_PREREQU_FAIL_GIVEN_ITEM
			end
		end
   		return 0
   	end
   	,

   	--完成该任务时服务器调用
   	OnAward = function(TASKINTERFACE_POINTER, bSuccess,iParam,ucRandomNum1,ucRandomNum2)	--后三个参数是任务变量1，2的值
		local final
		local player =	--取得玩家的一些数据
		{
			level = TaskCApi.GetPlayerLevel(TASKINTERFACE_POINTER),
			race = TaskCApi.GetPlayerRace(TASKINTERFACE_POINTER),
			prof = TaskCApi.GetPlayerOccupation(TASKINTERFACE_POINTER),
			buff = 0,
			repu31 = TaskCApi.GetRegionReputation(TASKINTERFACE_POINTER,31),
		}

		local x = ucRandomNum1
		local y = ucRandomNum2
		local ordernow = 10 * x + y
		--根据ordernow的值遍历tplib，找到索引号，存入变量final
		for i,v in ipairs(TaskList[9706].tplib) do
			if v.order == ordernow then
				final = i
				break
			end
		end

		--成功奖励
   		if bSuccess then
			--发放隐藏任务9766，记录绝对次数
			TaskCApi.DeliverNewTask(TASKINTERFACE_POINTER,9766)

			--收取普通物品
			if TaskList[9706].tplib[final].note == "item" then
				TaskCApi.TakeAwayCommonItem(TASKINTERFACE_POINTER, TaskList[9706].tplib[final].id, TaskList[9706].tplib[final].num or 1)
			end
			--收取wish类型任务的普通物品
			if TaskList[9706].tplib[final].note == "wish" then
				TaskCApi.TakeAwayCommonItem(TASKINTERFACE_POINTER, TaskList[9706].tplib[final].id2, TaskList[9706].tplib[final].num or 1)
			end
			--收取mos_item类型任务的任务物品
			if TaskList[9706].tplib[final].note == "mos_item" then
				TaskCApi.TakeAwayTaskItem(TASKINTERFACE_POINTER, TaskList[9706].tplib[final].id2, TaskList[9706].tplib[final].num or 1)
			end
			--将31号声望清零，清除辅助任务的次数和完成记录结果
			TaskCApi.DeliverRegionReputation(TASKINTERFACE_POINTER,31, 0-player.repu31)
			if TaskList[9706].tplib[final].note == "task" or TaskList[9706].tplib[final].note == "wish" then
				TaskCApi.ClearTaskCompleteTimesInFinishTimeTaskList(TASKINTERFACE_POINTER,TaskList[9706].tplib[final].id)
				TaskCApi.ClearFinishRecords(TASKINTERFACE_POINTER,TaskList[9706].tplib[final].id)
			end

			--发放奖励物品
			math.randomseed(os.time())

			--发放经验和魂币
			local base_awards = { xp = 108, bindmoney = 10 }
			local multi = { 0.4,	0.54,	0.67,	0.8,	0.94,	1.07,	1.2,	1.34,	1.47,	1.6,}
			local completetimes = TaskCApi.GetTaskCompleteTimesFromFinishTimeTaskList(TASKINTERFACE_POINTER,9706)	--任务完成次数
			local iExperience = TaskExpAdjust[player.level]		--根据玩家等级，从全局表里找到对应的等级经验系数
			local iBindMoneyNum = TaskMoneyAdjust[player.level]		--根据玩家等级，从全局表里找到对应的金钱经验系数
			local awardmulti
			if completetimes == 0 then awardmulti = 0
			elseif completetimes <= 10 then awardmulti = multi[completetimes]	--前10次是5倍
			elseif completetimes <= 20 then awardmulti = multi[completetimes-10] /5
			elseif completetimes <= 30 then awardmulti = multi[completetimes-20] /5
			else  awardmulti = multi[1] / 5
			end

			TaskCApi.DeliverExperience(TASKINTERFACE_POINTER,math.floor(iExperience * base_awards.xp * awardmulti))
			TaskCApi.DeliverBindMoney(TASKINTERFACE_POINTER,math.floor(iBindMoneyNum * base_awards.bindmoney * awardmulti))

		--失败奖励
		else
		--收取mos_item类型任务的任务物品，31号声望清零，清除辅助任务的次数和完成记录结果
			if TaskList[9706].tplib[final].note == "mos_item" then
				TaskCApi.TakeAwayTaskItem(TASKINTERFACE_POINTER, TaskList[9706].tplib[final].id2, TaskList[9706].tplib[final].num or 1)
			end
			TaskCApi.DeliverRegionReputation(TASKINTERFACE_POINTER,31, 0-player.repu31)
			if TaskList[9706].tplib[final].note == "task"  or TaskList[9706].tplib[final].note == "wish" then
				TaskCApi.ClearTaskCompleteTimesInFinishTimeTaskList(TASKINTERFACE_POINTER,TaskList[9706].tplib[final].id)
				TaskCApi.ClearFinishRecords(TASKINTERFACE_POINTER,TaskList[9706].tplib[final].id)
			end
   		end

   		return 0
   	end
}



